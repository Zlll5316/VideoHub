# ğŸ“¸ æ‰‹åŠ¨åˆ›å»ºè¡¨ - å›¾æ–‡æŒ‡å—

å¦‚æœ SQL è„šæœ¬ä¸€ç›´å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨åœ¨ Supabase Dashboard ä¸­åˆ›å»ºè¡¨ã€‚

## æ­¥éª¤ 1ï¼šåˆ›å»º teams è¡¨

1. **æ‰“å¼€ Supabase Dashboard**
   - è®¿é—®ï¼šhttps://supabase.com/dashboard
   - ç™»å½•å¹¶é€‰æ‹©ä½ çš„é¡¹ç›®

2. **æ‰“å¼€ Table Editor**
   - ç‚¹å‡»å·¦ä¾§èœå•çš„ **"Table Editor"**

3. **åˆ›å»ºæ–°è¡¨**
   - ç‚¹å‡»å³ä¸Šè§’çš„ **"New Table"** æŒ‰é’®
   - è¡¨åè¾“å…¥ï¼š`teams`

4. **æ·»åŠ åˆ—**
   ç‚¹å‡» "Add Column" æ·»åŠ ä»¥ä¸‹åˆ—ï¼š

   | åˆ—å | ç±»å‹ | è®¾ç½® |
   |------|------|------|
   | `id` | `uuid` | Primary Key, Default: `gen_random_uuid()` |
   | `name` | `text` | Not Null |
   | `description` | `text` | (å¯ä»¥ä¸ºç©º) |
   | `owner_id` | `uuid` | Not Null |
   | `created_at` | `timestamptz` | Default: `now()` |
   | `updated_at` | `timestamptz` | Default: `now()` |

5. **ä¿å­˜**
   - ç‚¹å‡» **"Save"** æŒ‰é’®

## æ­¥éª¤ 2ï¼šåˆ›å»º team_members è¡¨

1. **åˆ›å»ºæ–°è¡¨**
   - ç‚¹å‡» **"New Table"**
   - è¡¨åè¾“å…¥ï¼š`team_members`

2. **æ·»åŠ åˆ—**

   | åˆ—å | ç±»å‹ | è®¾ç½® |
   |------|------|------|
   | `id` | `uuid` | Primary Key, Default: `gen_random_uuid()` |
   | `team_id` | `uuid` | Not Null, Foreign Key â†’ `teams.id` |
   | `user_id` | `uuid` | (å¯ä»¥ä¸ºç©º) |
   | `email` | `text` | Not Null |
   | `role` | `text` | Not Null, Default: `'Viewer'` |
   | `status` | `text` | Not Null, Default: `'Pending'` |
   | `invited_by` | `uuid` | (å¯ä»¥ä¸ºç©º) |
   | `created_at` | `timestamptz` | Default: `now()` |

3. **æ·»åŠ å”¯ä¸€çº¦æŸ**
   - åœ¨è¡¨è®¾ç½®ä¸­æ‰¾åˆ° "Constraints"
   - æ·»åŠ  Unique Constraint: `(team_id, email)`

4. **ä¿å­˜**

## æ­¥éª¤ 3ï¼šåˆ›å»º team_folders è¡¨

1. **åˆ›å»ºæ–°è¡¨**
   - è¡¨åï¼š`team_folders`

2. **æ·»åŠ åˆ—**

   | åˆ—å | ç±»å‹ | è®¾ç½® |
   |------|------|------|
   | `id` | `uuid` | Primary Key, Default: `gen_random_uuid()` |
   | `team_id` | `uuid` | Not Null, Foreign Key â†’ `teams.id` |
   | `name` | `text` | Not Null |
   | `description` | `text` | (å¯ä»¥ä¸ºç©º) |
   | `created_by` | `uuid` | Not Null |
   | `created_at` | `timestamptz` | Default: `now()` |
   | `updated_at` | `timestamptz` | Default: `now()` |

3. **ä¿å­˜**

## æ­¥éª¤ 4ï¼šåˆ›å»º team_videos è¡¨

1. **åˆ›å»ºæ–°è¡¨**
   - è¡¨åï¼š`team_videos`

2. **æ·»åŠ åˆ—**

   | åˆ—å | ç±»å‹ | è®¾ç½® |
   |------|------|------|
   | `id` | `uuid` | Primary Key, Default: `gen_random_uuid()` |
   | `team_id` | `uuid` | Not Null, Foreign Key â†’ `teams.id` |
   | `folder_id` | `uuid` | (å¯ä»¥ä¸ºç©º), Foreign Key â†’ `team_folders.id` |
   | `video_id` | `uuid` | Not Null |
   | `added_by` | `uuid` | Not Null |
   | `created_at` | `timestamptz` | Default: `now()` |

3. **æ·»åŠ å”¯ä¸€çº¦æŸ**
   - Unique Constraint: `(team_id, folder_id, video_id)`

4. **ä¿å­˜**

## æ­¥éª¤ 5ï¼šç¦ç”¨ RLSï¼ˆç”¨äºæµ‹è¯•ï¼‰

1. **æ‰“å¼€ SQL Editor**
2. **æ‰§è¡Œä»¥ä¸‹ SQL**ï¼š

```sql
ALTER TABLE public.teams DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.team_members DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.team_folders DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.team_videos DISABLE ROW LEVEL SECURITY;
```

## æ­¥éª¤ 6ï¼šåˆ·æ–° Schema Cache

1. **ç­‰å¾… 2-3 åˆ†é’Ÿ**ï¼ˆschema cache ä¼šè‡ªåŠ¨åˆ·æ–°ï¼‰
2. **æˆ–è€…**åœ¨ Settings â†’ API ä¸­æ‰¾åˆ° "Reload schema" æŒ‰é’®

## æ­¥éª¤ 7ï¼šéªŒè¯

åœ¨ Table Editor ä¸­ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ° 4 ä¸ªè¡¨ï¼š
- âœ… teams
- âœ… team_members
- âœ… team_folders
- âœ… team_videos

ç„¶ååˆ·æ–°åº”ç”¨é¡µé¢ï¼Œåº”è¯¥å°±èƒ½æ­£å¸¸å·¥ä½œäº†ï¼
