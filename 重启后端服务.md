# 🔄 重启后端服务指南

## ⚠️ 重要：必须重启后端服务才能生效！

### 步骤 1：停止旧的后端服务

1. 找到运行 `main.py` 的终端窗口
2. 按 `Ctrl + C` 停止服务
3. 或者运行以下命令查找并停止：
   ```bash
   lsof -ti:8000 | xargs kill -9
   ```

### 步骤 2：重新启动后端服务

```bash
cd /Users/arui/Desktop/VideoHub_Project
python3 main.py
```

或者使用一键启动脚本：
```bash
./一键启动后端.command
```

### 步骤 3：确认后端已启动

看到以下消息说明启动成功：
```
✅ Google 连接测试通过！
✅ Gemini API 客户端已初始化
✅ Notion API Key 已配置（如果已配置）
```

### 步骤 4：刷新前端页面

1. 在浏览器中按 `Ctrl + Shift + R`（Mac: `Cmd + Shift + R`）强制刷新
2. 或者清除浏览器缓存后刷新

## 🔍 验证修复是否生效

1. 打开浏览器开发者工具（F12）
2. 切换到 "Console" 标签
3. 尝试分析一个视频
4. 查看控制台日志：
   - 应该看到：`✅ 后端返回数据: {status: "success", degraded: true, ...}`
   - 不应该看到：`❌ 后端返回错误`

## ❓ 如果还是显示错误

1. **检查后端日志**：查看运行 `main.py` 的终端，确认是否看到：
   - `⚠️ 进入降级模式...`
   - `✅ 返回结果: status=success, degraded=True`

2. **检查前端控制台**：按 F12 打开开发者工具，查看 Network 标签：
   - 找到 `/analyze_video` 请求
   - 查看 Response，确认返回的是 `{"status": "success", ...}` 而不是 `{"status": "error", ...}`

3. **清除浏览器缓存**：
   - Chrome: 设置 → 隐私和安全 → 清除浏览数据 → 选择"缓存的图片和文件"
   - 或者使用无痕模式测试
